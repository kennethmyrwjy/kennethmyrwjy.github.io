<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TikTok Login Demo (Insecure)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: Arial; background: #f5f8fc; }
        .container { max-width: 400px; margin: 80px auto; background: #fff; padding: 32px 22px; border-radius: 10px; box-shadow: 0 2px 18px #eaeaea; }
        h2 { font-weight: 600; }
        button { padding: 12px 32px; background: #16181a; color: #fff; border: none; border-radius: 6px; font-size: 16px; cursor: pointer; }
        button:hover { background: #222326; }
        .profile { margin-top: 28px; }
        #result { margin-top: 18px; color: #1a8991; }
        .scopes { margin-bottom: 20px; }
        .scopes label { display: block; margin-bottom: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Login with TikTok (DEMO)</h2>
        <form onsubmit="loginTikTok(); return false;">
            <div class="scopes">
                <label><input type="checkbox" class="scope" value="user.info.basic" checked> user.info.basic</label>
                <label><input type="checkbox" class="scope" value="user.info.profile"> user.info.profile</label>
                <label><input type="checkbox" class="scope" value="user.info.stats"> user.info.stats</label>
                <label><input type="checkbox" class="scope" value="video.list"> video.list</label>
            </div>
            <button type="submit">Continue with TikTok</button>
        </form>
        <div id="result"></div>
        <div id="profile" class="profile"></div>
    </div>
<script>
    // TikTok app settings
    const CLIENT_KEY = "sbawjjtuzyd0z5u7fv";
    const CLIENT_SECRET = "Qdq5gHGlMppmWIFVgpxqDo18Wa7XQFhO";
    const REDIRECT_URI = "https://kennethmyrwjy.github.io/callback.html";
    const AUTHORIZE_URL = "https://www.tiktok.com/v2/auth/authorize/";

    function createState() {
        return Math.random().toString(36).substring(2, 15);
    }

    function loginTikTok() {
        const checkedScopes = Array.from(document.querySelectorAll('.scope:checked'))
            .map(cb => cb.value);
        if (checkedScopes.length === 0) {
            document.getElementById("result").innerText = "Select at least one scope.";
            return;
        }
        const SCOPES = checkedScopes.join(' ');
        const state = createState();
        localStorage.setItem("tiktokState", state);
        const url = `${AUTHORIZE_URL}?client_key=${encodeURIComponent(CLIENT_KEY)}&scope=${encodeURIComponent(SCOPES)}&response_type=code&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&state=${encodeURIComponent(state)}`;
        window.location.href = url;
    }

    // (existing callback/exchange logic would be on callback.html)

</script>
</body>
</html>
